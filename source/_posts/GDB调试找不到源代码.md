---
title: GDB调试找不到源文件问题定位
author: Chaos
date: 2024/1/12
---


### 问题概述：  
GDB调试文件找不到file源码  
在GDB调试过程中，使用b设置断点 GDB提示找不到源码
![](http://nas.xiaojiacheng.top:5543//blog_pic/uploads/2024/01/20240112162555.png)
### 问题分析
1.GDB调试时找不到源码，在编译过程中并未将调试信息同时编译进编译文件，也就是编译选项中未添加 -g   
![](http://nas.xiaojiacheng.top:5543//blog_pic/uploads/2024/01/20240112163017.png)  
2.添加调试选项 -g编译后仍出现问题。编译程序分为编译与链接阶段，编译产生 .o文件，链接将.o 文件链接为最终的可执行文件。编译选项需要在链接和编译过程都添加。
3.确认编译与链接过程都添加调试选项，仍有问题，确定需要断点调试的代码位于动态库内，前面步骤只替换了带有调试信息的可执行文件，动态库仍未包含可调试信息。替换动态库，可以正确进行断点
![](http://nas.xiaojiacheng.top:5543//blog_pic/uploads/2024/01/20240112165319.png)
### 解决方案
1.GBD调试找不到source file 是因为运行程序未包含可调试信息。  
2.通过编译时增加调试选项 -g 为程序添加调试信息，编译，链接过程都添加。  
3.当调试代码位于动态库中时，注意确保程序加载的动态库也包含调试信息。
> 替换so文件后再次gdb调试，有时可能还是找不到源文件，推测为加载动态库的问题，确保动态库加载路径正确，以及替换动态库时先删除旧文件，再拷贝新的动态库文件到加载路径，大概率可以解决  
> 当调试代码断点需要在程序未启动时设置，因为程序未启动，未加载动态库，会出现找不到源文件的情况，![](http://nas.xiaojiacheng.top:5543//blog_pic/uploads/2024/01/20240112165319.png)
确认需要调试代码无误的情况下，可以按照提示先设置断点，待动态库加载后断点依然能正常中断。